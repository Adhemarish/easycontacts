<div class="d-flex justify-content-between header-new-rappel">

    <%= link_to contact_path(@contact) do %>
      <p class="blue-text">Annuler</p>
    <% end %>
    <p class="blue-light-text">Nouvelle note</p>


    <%= link_to edit_contact_path(@contact) do %>
    <p class="blue-text"><%= link_to 'Retour', contact_path(@contact) %> </p>
    <% end %>
</div>

<div class ="container">
  <% @contact.notes.each do |note| %>
    <div class="row">
      <%#= render 'notes/contenttag', note: une_note, tags: une_note.tags %>
      <p class="notes-text"><%= note.content %></p>
      <div class="d-flex tag-add-full tag-list ">
        <% note.tags.each do |t| %>
          <div class="tag-bis small-tag red-tag">
          <p class="margin-tag" data-tag-id = "<%= t.id %>" ><%= t.label %></p>
          </div>
        <% end %>
      </div>
    </div>
  <% end %>
</div>
<%#= render 'contactnote', contact: @contact, note: @note, tags: @tags %>
<div>
  <%= simple_form_for [ @contact, @note ],
    wrapper: :inline_form,
    wrapper_mappings: { check_boxes:   :horizontal_collection } do |f| %>
  <%= f.error_notification %>
  <!-- usage of .input_field to strip away all the divs wrappers around the input -->
  <%= f.input_field :content, as: :text, class: ""%>
  <div class="col-sm-12" id="tagsCheckboxes"> <!--ID IMPORTANT le placement en JS -->
      <!-- display des tags par partial pour rendre en AJAX. Un nouveau tag est    -->
      <!-- automatiquement 'checked' dans le controlleur, les autres non -->
    <% @tags.each do |un_tag| %>
      <%= render 'tags/checkbox', tag: un_tag, checked: @checked %>
    <% end %>
  </div>
  <%= f.button :submit, 'Valider', class: 'btn btn-primary'%>
  <% end %>

  <br>
  <div id='container-tag'> <!-- ID IMPORTANT / JS -->
  <%= simple_form_for @tag, remote: true do |ff| %>
  <%= ff.error_notification message: "On ne peut pas supprimer un tag utilisÃ©" %>
  <%= ff.text_field :label %>
  <div class="validate-button">
    <%= ff.button :submit, 'Tag +', class: "btn btn-secondary"  %>
  </div>
  <% end %>
  </div>
</div>





  <!-- POUR FATTEN -->
    <%#= f.association :tags, collection: tags, label_method: :label, value_method: :id, as: :check_boxes, wrapper: :horizontal_collection_inline%>
    <%#= f.button :submit, 'Sauvegarder', class: 'btn btn-primary' %>

